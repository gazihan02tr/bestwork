<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}BestSoft Admin{% endblock %}</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        },
                        surface: {
                            DEFAULT: '#ffffff',
                            variant: '#f4f4f5',
                            container: '#fafafa',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'elevation-1': '0 1px 2px 0 rgb(0 0 0 / 0.05)',
                        'elevation-2': '0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)',
                        'elevation-3': '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)',
                        'elevation-4': '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)',
                        'elevation-5': '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)',
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    
    <!-- Alpine.js + Collapse Plugin -->
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <style>
        * { font-family: 'Inter', sans-serif; }
        
        .material-symbols-rounded {
            font-variation-settings: 'FILL' 0, 'wght' 500, 'GRAD' 0, 'opsz' 24;
        }
        
        .material-symbols-rounded.filled {
            font-variation-settings: 'FILL' 1, 'wght' 500, 'GRAD' 0, 'opsz' 24;
        }
        
        /* Material Design Ripple Effect */
        .ripple {
            position: relative;
            overflow: hidden;
        }
        
        .ripple::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform .4s, opacity .8s;
        }
        
        .ripple:active::after {
            transform: scale(0, 0);
            opacity: .3;
            transition: 0s;
        }
        
        /* Sidebar Link Styles */
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 100px;
            color: #1f2937;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .nav-item:hover {
            background: #f3e8ff;
            color: #7c3aed;
        }
        
        .nav-item.active {
            background: #7c3aed;
            color: white;
        }
        
        .nav-item.active .material-symbols-rounded {
            font-variation-settings: 'FILL' 1, 'wght' 500, 'GRAD' 0, 'opsz' 24;
        }
        
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 100px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* Material Card */
        .m3-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            transition: box-shadow 0.2s ease;
        }
        
        .m3-card:hover {
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        
        /* Material Button */
        .m3-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 24px;
            border-radius: 100px;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .m3-btn-filled {
            background: #7c3aed;
            color: white;
        }
        
        .m3-btn-filled:hover {
            background: #6d28d9;
            box-shadow: 0 4px 6px -1px rgb(124 58 237 / 0.3);
        }
        
        .m3-btn-outlined {
            background: transparent;
            color: #7c3aed;
            border: 1px solid #7c3aed;
        }
        
        .m3-btn-outlined:hover {
            background: #f3e8ff;
        }
        
        .m3-btn-tonal {
            background: #ede9fe;
            color: #6d28d9;
        }
        
        .m3-btn-tonal:hover {
            background: #ddd6fe;
        }
        
        /* Material Input */
        .m3-input {
            width: 100%;
            padding: 16px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            font-size: 14px;
            transition: all 0.2s ease;
            background: #fafafa;
        }
        
        .m3-input:focus {
            outline: none;
            border-color: #7c3aed;
            background: white;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }
        
        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease forwards;
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-gray-50 min-h-screen" x-data="{ sidebarOpen: true, profileOpen: false, mobileMenu: false }">
    
    <!-- Mobile Overlay -->
    <div 
        x-show="mobileMenu" 
        x-transition:enter="transition-opacity ease-out duration-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="transition-opacity ease-in duration-200"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
        @click="mobileMenu = false"
        class="fixed inset-0 bg-black/50 z-40 lg:hidden"
    ></div>
    
    <!-- Sidebar -->
    <aside 
        class="fixed top-0 left-0 h-screen bg-white border-r border-gray-200 transition-all duration-300 z-50 flex flex-col"
        :class="[
            sidebarOpen ? 'w-72' : 'w-20',
            mobileMenu ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'
        ]"
    >
        <!-- Logo -->
        <div class="p-4 border-b border-gray-100">
            <div class="flex items-center justify-between">
                <a href="{{ url_for('bestsoft_bp.dashboard') }}" class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center shadow-lg shadow-primary-500/30">
                        <span class="text-white font-bold text-lg">B</span>
                    </div>
                    <div x-show="sidebarOpen" x-transition>
                        <h1 class="font-bold text-gray-900 text-lg leading-none">BestSoft</h1>
                        <p class="text-xs text-gray-500 mt-0.5">Admin Panel</p>
                    </div>
                </a>
                <button 
                    @click="sidebarOpen = !sidebarOpen" 
                    class="p-2 rounded-full hover:bg-gray-100 transition-colors hidden lg:flex"
                    x-show="sidebarOpen"
                >
                    <span class="material-symbols-rounded text-gray-500 text-xl">menu_open</span>
                </button>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="flex-1 p-3 space-y-1 overflow-y-auto custom-scrollbar">
            <!-- Dashboard -->
            <a href="{{ url_for('bestsoft_bp.dashboard') }}" 
               class="nav-item ripple {% if request.endpoint == 'bestsoft_bp.dashboard' %}active{% endif %}">
                <span class="material-symbols-rounded text-xl">dashboard</span>
                <span x-show="sidebarOpen" x-transition>Dashboard</span>
            </a>
            
            <!-- Divider with Label -->
            <div x-show="sidebarOpen" class="pt-4 pb-2 px-4">
                <span class="text-xs font-semibold text-gray-400 uppercase tracking-wider">E-Ticaret Ayarları</span>
            </div>
            
            <!-- İçerik Yönetimi Dropdown -->
            <div x-data="{ open: {% if request.endpoint in ['bestsoft_bp.slider', 'bestsoft_bp.certificates', 'bestsoft_bp.announcements', 'bestsoft_bp.site_info', 'bestsoft_bp.eticaret_bandi'] %}true{% else %}false{% endif %} }">
                <button 
                    @click="open = !open"
                    class="nav-item ripple w-full justify-between {% if request.endpoint in ['bestsoft_bp.slider', 'bestsoft_bp.certificates', 'bestsoft_bp.announcements', 'bestsoft_bp.site_info', 'bestsoft_bp.eticaret_bandi'] %}bg-primary-50 text-primary-700{% endif %}"
                >
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-rounded text-xl">widgets</span>
                        <span x-show="sidebarOpen" x-transition>İçerik Yönetimi</span>
                    </div>
                    <span x-show="sidebarOpen" class="material-symbols-rounded text-lg transition-transform duration-200" :class="open ? 'rotate-180' : ''">expand_more</span>
                </button>
                
                <div x-show="open" x-collapse class="mt-1 ml-4 space-y-1 border-l-2 border-gray-100 pl-3">
                    <a href="{{ url_for('bestsoft_bp.slider') }}" 
                       class="nav-item ripple text-sm py-2.5 {% if request.endpoint == 'bestsoft_bp.slider' %}active{% endif %}">
                        <span class="material-symbols-rounded text-lg">slideshow</span>
                        <span x-show="sidebarOpen" x-transition>Slider</span>
                    </a>
                    
                    <a href="{{ url_for('bestsoft_bp.certificates') }}" 
                       class="nav-item ripple text-sm py-2.5 {% if request.endpoint == 'bestsoft_bp.certificates' %}active{% endif %}">
                        <span class="material-symbols-rounded text-lg">workspace_premium</span>
                        <span x-show="sidebarOpen" x-transition>Sertifikalar</span>
                    </a>
                    
                    <a href="{{ url_for('bestsoft_bp.announcements') }}" 
                       class="nav-item ripple text-sm py-2.5 {% if request.endpoint == 'bestsoft_bp.announcements' %}active{% endif %}">
                        <span class="material-symbols-rounded text-lg">campaign</span>
                        <span x-show="sidebarOpen" x-transition>Duyurular</span>
                    </a>
                    
                    <a href="{{ url_for('bestsoft_bp.site_info') }}" 
                       class="nav-item ripple text-sm py-2.5 {% if request.endpoint == 'bestsoft_bp.site_info' %}active{% endif %}">
                        <span class="material-symbols-rounded text-lg">tune</span>
                        <span x-show="sidebarOpen" x-transition>Site Ayarları</span>
                    </a>
                    
                    <a href="{{ url_for('bestsoft_bp.eticaret_bandi') }}" 
                       class="nav-item ripple text-sm py-2.5 {% if request.endpoint == 'bestsoft_bp.eticaret_bandi' %}active{% endif %}">
                        <span class="material-symbols-rounded text-lg">storefront</span>
                        <span x-show="sidebarOpen" x-transition>E-Ticaret Bandı</span>
                    </a>
                </div>
            </div>
            
            <!-- Divider with Label -->
            <div x-show="sidebarOpen" class="pt-4 pb-2 px-4">
                <span class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Ayarlar</span>
            </div>
            
            <a href="{{ url_for('bestsoft_bp.contact_messages') }}" 
               class="nav-item ripple {% if request.endpoint == 'bestsoft_bp.contact_messages' %}active{% endif %}">
                <span class="material-symbols-rounded text-xl">inbox</span>
                <span x-show="sidebarOpen" x-transition>Mesajlar</span>
            </a>
        </nav>
        
        <!-- User Profile -->
        <div class="p-3 border-t border-gray-100">
            <div x-data="{ open: false }" class="relative">
                <button 
                    @click="open = !open"
                    class="w-full flex items-center gap-3 p-3 rounded-2xl hover:bg-gray-50 transition-all"
                >
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center flex-shrink-0">
                        <span class="material-symbols-rounded text-white text-lg">person</span>
                    </div>
                    <div x-show="sidebarOpen" class="flex-1 text-left">
                        <p class="font-semibold text-gray-900 text-sm">Admin</p>
                        <p class="text-xs text-gray-500">{{ session.get('username', 'admin') }}</p>
                    </div>
                    <span x-show="sidebarOpen" class="material-symbols-rounded text-gray-400 text-xl transition-transform" :class="open ? 'rotate-180' : ''">expand_more</span>
                </button>
                
                <!-- Dropdown -->
                <div 
                    x-show="open"
                    x-transition:enter="transition ease-out duration-200"
                    x-transition:enter-start="opacity-0 scale-95"
                    x-transition:enter-end="opacity-100 scale-100"
                    x-transition:leave="transition ease-in duration-150"
                    x-transition:leave-start="opacity-100 scale-100"
                    x-transition:leave-end="opacity-0 scale-95"
                    @click.away="open = false"
                    class="absolute bottom-full left-0 right-0 mb-2 bg-white rounded-2xl shadow-elevation-4 border border-gray-100 overflow-hidden"
                >
                    <div class="p-2">
                        <a href="/" target="_blank" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gray-50 transition-colors">
                            <span class="material-symbols-rounded text-gray-600">open_in_new</span>
                            <span class="text-sm font-medium text-gray-700">Siteyi Görüntüle</span>
                        </a>
                        <form action="{{ url_for('bestsoft_bp.logout') }}" method="POST">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-red-50 transition-colors">
                                <span class="material-symbols-rounded text-red-500">logout</span>
                                <span class="text-sm font-medium text-red-600">Çıkış Yap</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main 
        class="transition-all duration-300 min-h-screen"
        :class="sidebarOpen ? 'lg:ml-72' : 'lg:ml-20'"
    >
        <!-- Top Bar -->
        <header class="bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-30">
            <div class="flex items-center justify-between px-4 lg:px-8 py-3">
                <!-- Left side -->
                <div class="flex items-center gap-4">
                    <!-- Mobile menu button -->
                    <button 
                        @click="mobileMenu = !mobileMenu"
                        class="p-2 rounded-full hover:bg-gray-100 transition-colors lg:hidden"
                    >
                        <span class="material-symbols-rounded text-gray-600">menu</span>
                    </button>
                    
                    <!-- Desktop toggle -->
                    <button 
                        @click="sidebarOpen = !sidebarOpen"
                        class="p-2 rounded-full hover:bg-gray-100 transition-colors hidden lg:flex"
                        x-show="!sidebarOpen"
                    >
                        <span class="material-symbols-rounded text-gray-600">menu</span>
                    </button>
                    
                    <!-- Page Title -->
                    <div>
                        <h1 class="text-lg font-semibold text-gray-900">{% block page_title %}Dashboard{% endblock %}</h1>
                        <p class="text-xs text-gray-500 hidden sm:block">{% block page_subtitle %}Hoş geldiniz{% endblock %}</p>
                    </div>
                </div>
                
                <!-- Right side -->
                <div class="flex items-center gap-2">
                    <!-- Search -->
                    <button class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                        <span class="material-symbols-rounded text-gray-600">search</span>
                    </button>
                    
                    <!-- Notifications -->
                    <button class="p-2 rounded-full hover:bg-gray-100 transition-colors relative">
                        <span class="material-symbols-rounded text-gray-600">notifications</span>
                        <span class="absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"></span>
                    </button>
                    
                    <!-- Theme Toggle -->
                    <button class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                        <span class="material-symbols-rounded text-gray-600">dark_mode</span>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- Page Content -->
        <div class="p-4 lg:p-8">
            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="mb-6 space-y-3">
                        {% for category, message in messages %}
                            <div 
                                x-data="{ show: true }"
                                x-show="show"
                                x-transition
                                class="flex items-center justify-between p-4 rounded-2xl animate-slide-in
                                    {% if category == 'success' %}bg-green-50 border border-green-200{% endif %}
                                    {% if category == 'error' %}bg-red-50 border border-red-200{% endif %}
                                    {% if category == 'warning' %}bg-amber-50 border border-amber-200{% endif %}
                                    {% if category == 'info' %}bg-blue-50 border border-blue-200{% endif %}"
                            >
                                <div class="flex items-center gap-3">
                                    <span class="material-symbols-rounded filled
                                        {% if category == 'success' %}text-green-600{% endif %}
                                        {% if category == 'error' %}text-red-600{% endif %}
                                        {% if category == 'warning' %}text-amber-600{% endif %}
                                        {% if category == 'info' %}text-blue-600{% endif %}">
                                        {% if category == 'success' %}check_circle{% endif %}
                                        {% if category == 'error' %}error{% endif %}
                                        {% if category == 'warning' %}warning{% endif %}
                                        {% if category == 'info' %}info{% endif %}
                                    </span>
                                    <p class="font-medium text-sm
                                        {% if category == 'success' %}text-green-800{% endif %}
                                        {% if category == 'error' %}text-red-800{% endif %}
                                        {% if category == 'warning' %}text-amber-800{% endif %}
                                        {% if category == 'info' %}text-blue-800{% endif %}">
                                        {{ message }}
                                    </p>
                                </div>
                                <button @click="show = false" class="p-1 rounded-full hover:bg-white/50 transition-colors">
                                    <span class="material-symbols-rounded text-gray-500 text-lg">close</span>
                                </button>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            
            {% block content %}{% endblock %}
        </div>
    </main>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
